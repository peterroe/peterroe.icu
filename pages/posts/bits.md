---
title: å·§å¦™çš„ä½è¿ç®—
date: 2021-11-27
time: 5min
---

>ä½è¿ç®—åœ¨å¤„ç†æ•°å­—é—´çš„å…³ç³»ä¸­æ€»æ˜¯è¡¨ç°å‡ºè‰²

åŸºæœ¬çš„ä¸æˆ–éè¿™é‡Œå°±ä¸åœ¨å¤šè¯´äº†ï¼Œæ¥çœ‹çœ‹ä¸‹é¢å‡ ä¸ªå·§å¦™çš„ä½è¿ç®—ä¾‹å­ï¼š

## è·å¾—ç›®æ ‡æ¯”ç‰¹ä½

```javascript
function getBit(number, bitPosition) {
    return (number >> bitPosition) & 1
}
```
è¯¥æ–¹æ³•å‘å³ç§»åŠ¨ç›®æ ‡ä½åˆ°æœ€å³è¾¹ï¼Œå³ä½æ•°ç»„çš„ç¬¬**0**ä¸ªä½ç½®ä¸Šã€‚ç„¶ååœ¨è¯¥æ•°ä¸Šä¸å½¢å¦‚**0001**çš„äºŒè¿›åˆ¶å½¢å¼çš„æ•°è¿›è¡Œ**ADD**æ“ä½œã€‚è¿™ä¼šæ¸…ç†æ‰é™¤äº†ç›®æ ‡ä½çš„æ‰€æœ‰å…¶å®ƒä½çš„æ•°æ®ã€‚å¦‚æœç›®æ ‡ä½æ˜¯**1**ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯**1**ï¼Œåä¹‹ï¼Œç»“æœæ˜¯**0**

**è§£é‡Š**

å‡è®¾æˆ‘ä»¬è¦è·å¾—æ•°å­—**23**çš„ç¬¬ä¸‰ä¸ªæ¯”ç‰¹ä½ï¼Œé‚£ä¹ˆå°±æ˜¯å‘å³è¾¹ç§»åŠ¨**2**ä½

æ‰€ä»¥**number=23ã€bitPosition=2**

```js
//æ‰€ä»¥:
23 >> 2 & 1
//ç­‰ä»·äº:
(10111)â‚‚ >> 2 & 1
//ç­‰ä»·äºä¸º:
(101)â‚‚ & 1
//ä½è¿ç®—ç»“æœ:
1
```
## æŠŠç›®æ ‡ä½è®¾ç½®ä¸º1

```js
function setBit(number,bitPosition) {
    return (1 << bitPosition) && number
}
```
è¯¥æ–¹æ³•æŠŠ**1**å‘å·¦ç§»åŠ¨äº†`bitPosition`ä½ï¼Œç”Ÿæˆäº†ä¸€ä¸ªäºŒè¿›åˆ¶å½¢å¦‚**00100**çš„å€¼ã€‚ç„¶åæˆ‘ä»¬æ‹¿è¯¥å€¼ä¸ç›®æ ‡æ•°å­—è¿›è¡Œ`OR`æ“ä½œï¼Œå°±èƒ½æŠŠç›®æ ‡ä½è®¾ç½®ä½**1**è€Œä¸å½±å“å…¶å®ƒä½

**è§£é‡Š**

å‡è®¾**number=23ã€bitPosition=3**

```js
1 << 3 & 23
//ç­‰ä»·äº:
(1000)â‚‚ << 3 & (10111)â‚‚
//ç­‰ä»·äºä¸º:
(1000)â‚‚ & (10111)â‚‚
//ä½è¿ç®—ç»“æœ:
(11111)â‚‚
//åè¿›åˆ¶ï¼š
31
```

## æŠŠç›®æ ‡ä½è®¾ç½®ä¸º0

```js
function clearBit() {
    return ~(1 << bitPosition) & number
}
```
è¯¥æ–¹æ³•æŠŠ**1**å‘å·¦ç§»åŠ¨äº†`bitPosition`ä½ï¼Œç”Ÿæˆäº†ä¸€ä¸ªäºŒè¿›åˆ¶å½¢å¦‚**00100**çš„å€¼ã€‚ç„¶ååè½¬æ¯ä¸€ä½çš„æ•°å­—ï¼Œå¾—åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶å½¢å¦‚**11011**çš„å€¼ã€‚æ¥ç€ä¸ç›®æ ‡å€¼è¿›è¡Œ`ADD`æ“ä½œï¼Œå°±èƒ½æ¸…é™¤æ‰ç›®æ ‡ä½çš„å€¼

**~å–åæ“ä½œ**

`~`æ“ä½œä¼šå°†äºŒè¿›åˆ¶ä½é€ä½å–åï¼ŒåŒ…æ‹¬ç¬¦å·ä½

## æŠŠç›®æ ‡ä¸ºè®¾ç½®ä¸º0æˆ–1

```js
function updateBit(number,bitPosition,bitValue) {
    (bitValue <<< bitPosition) |  //è®¾ç½®ç›®æ ‡å€¼
    (number & ~(1 << bitPosition)) //æ¸…é™¤ç›®æ ‡å€¼
}
```

ä¸Šé¢æ–¹æ³•ç»„åˆäº†`ClearBit`å’Œ`SetBit`

**ä¸ºä»€ä¹ˆè¦æ¸…é™¤ç›®æ ‡å€¼ï¼Ÿç›´æ¥è®¾ç½®ä¸è¡Œå—ï¼Ÿ**

ç­”æ¡ˆæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“ç›®æ ‡ä½ï¼ˆå‡è®¾ä¸º`X`ï¼‰æ˜¯**1**è¿˜æ˜¯**0**ï¼Œç›´æ¥è®¡ç®—å°±ä¼šæœ‰ä¸ç¡®å®šçš„ç»“æœï¼Œä¾‹å¦‚ä¸‹:
```js
X | 0 = 0 //(X = 0)
X | 0 = 1 //(X = 1)
X | 1 = 0 //(X = 1)
X | 1 = 1 //(X = 1)
```
è€Œæˆ‘ä»¬å¹¶ä¸å…³å¿ƒ`X`åŸæ¥æ˜¯**0**è¿˜æ˜¯**1**ï¼Œæ‰€ä»¥å…ˆæŠŠ`X`å€¼ç½®ä¸ºé›¶ï¼Œå°±å¯ä»¥å¾—åˆ°ç»å¯¹æ­£ç¡®çš„ç»“æœ
```js
X | 0 = 0 //(X = 0)
X | 1 = 1 //(X = 0)
```

## æ£€æµ‹æŸä¸€ä¸ªæ•°å¥‡å¶æ€§
```js
function isOdd(number) {
    return number & 1
}
```
å¥‡æ•°çš„æœ€åä¸€ä½ä¸€å®šä¸º1

## æ•°å­—æœ¬èº«ä¹˜2
```js
function mutiplyByTwo(number) {
    return number << 1
}
```

è¯¥æ–¹æ³•å°†åŸå§‹æ•°å­—å‘å·¦ç§»åŠ¨ä¸€ä½ã€‚å› æ­¤æ‰€æœ‰ä½éƒ½å°†ä¹˜ä»¥**2**ï¼Œå› æ­¤æ•°å­—æœ¬èº«ä¹Ÿå°†ä¹˜ä»¥**2**

## æ•°å­—æœ¬èº«é™¤2
```js
function divideByTwo(number) {
    return number >> 1
}
```

ä¸ä¸ŠåŒç†ï¼Œå‘å³ç§»åŠ¨å³é™¤2

## æ”¹å˜æ•°å­—ç¬¦å·
```js
function switchSign(number) {
  return ~number + 1;
}
```
è¯¥æ–¹æ³•å°†æ­£æ•°å˜æˆè´Ÿæ•°ï¼Œåä¹‹äº¦ç„¶ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œå®ƒä½¿ç”¨äº†**äºŒè¿›åˆ¶è¡¥ç **çš„æ–¹æ³•ï¼Œå³å–åæ‰€æœ‰ä½ç„¶ååŠ 1

## è®¡ç®—æ•°å­—çš„æœ‰æ•ˆä½æ•°
```js
function bitLength(number) {
    let bitsCounter = 0;

    while ((1 << bitsCounter) <= number) {
        bitsCounter += 1;
    }

    return bitsCounter;
}
```
ä¾‹å¦‚`number = 5`ï¼Œä¹Ÿå°±æ˜¯`(0101)â‚‚`ï¼Œæœ‰ä¸‰ä¸ªæœ‰æ•ˆä½

æ¨¡æ‹Ÿæ­¥éª¤:
* 1 å°äºæˆ–ç­‰äº 5ï¼Œè®¡æ•°ä¸º1
* 2 å°äºæˆ–ç­‰äº 5ï¼Œè®¡æ•°ä¸º2
* 4 å°äºæˆ–ç­‰äº 5ï¼Œè®¡æ•°ä¸º3
* 8 å¤§äº5ï¼Œåœæ­¢è®¡æ•°

## åˆ¤æ–­æ•°å­—æ˜¯å¦å¯ä»¥è¡¨ç¤ºä¸º2çš„å¹‚
```js
function isPowerOfTwo(number) {
  return (number & (number - 1)) === 0;
}
```
å…ˆæ¥æ€è€ƒä¸‹ï¼Œå¸¸è§2çš„å¹‚æœ‰ï¼š2ã€4ã€8ã€16

ä»¥16ä¸ºä¾‹å­ï¼š

`16 & 15` ç­‰ä»·äº`(1000)â‚‚ & (0111)â‚‚`ï¼Œè¿ç®—ä¹‹åç»“æœè‡ªç„¶ä¸º**0**

## ä½è¿ç®—æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

è™½ç„¶ä½è¿ç®—é€šè¿‡å„ç§å·¦ç§»å³ç§»æ¥æ“ä½œæ•°å­—çš„è¿‡ç¨‹ç”šæ˜¯å¥‡å¦™ï¼Œä½†å¯èƒ½ä½ ä¹Ÿä¼šæ€è€ƒï¼Œè¿™äº›æ“ä½œæˆ‘ä¸ç”¨ä½è¿ç®—ä¹Ÿèƒ½åšåˆ°å•Šï¼Ÿé‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦ä½è¿ç®—å‘¢ï¼Ÿ

å…¶å®ä¸ç„¶ï¼Œä½è¿ç®—çš„ä½œç”¨åœ¨ç®—æ³•ä¸­ç»å¸¸ä½“ç°

ä¾‹å¦‚`LeetCode`çš„[è¿™ä¸€ä¸ªé¢˜ç›®](https://leetcode-cn.com/problems/single-number/)ï¼š


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d98aee61d84c45059c46291050fdb514~tplv-k3u1fbpfcp-watermark.image?)

æ˜¾ç„¶ï¼Œå› ä¸ºç›¸åŒçš„æ•°å­—**å¼‚æˆ–ä¸€å®šä¸º0**ï¼Œå‰©ä¸‹çš„é‚£ä¸ªæ•°å­—è‚¯å®šä¼šä¿ç•™ä¸‹æ¥ï¼Œæ ¹æ®å¼‚æˆ–çš„äº¤æ¢æ€§ï¼Œæˆ‘ä»¬ä¸ç”¨ç®¡æ•°å­—çš„é¡ºåºï¼Œå¼‚æˆ–æ¯ä¸€ä¸ªæ•°å­—å³å¯ï¼š

```js
var singleNumber = function(nums) {
    let s = 0
    for(let num of nums) {
        s ^= num
    }
    return s
};
```

å¯è§ï¼ŒæŒæ¡ä½è¿ç®—è¿˜æœ‰å¿…è¦çš„ğŸ˜